# Update the version of the project
update_version:
    needs:
        - job: eslint
    stage: version
    before_script: []
    script:
        - echo $CI_MERGE_REQUEST_LABELS
    only:
        - merge_requests
        - staging

# Get the version tag for the job
get_version:
    stage: version
    image: $NODE_IMAGE
    script:
        - export TAG=$(node -p "require('./package.json').version")
        - echo "TAG=$TAG" >> variables.env
    before_script: []
    services: []
    artifacts:
        reports:
            dotenv: variables.env
    only:
        - production
